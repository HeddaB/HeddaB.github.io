<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfect timing</title>

    <link rel="stylesheet" href="normalize.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i">
    <link href="https://fonts.googleapis.com/css?family=Gothic+A1|Montserrat" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <div class="logo">
        <img src="img/pt_sortrød.png" alt="logo"></div>

    <h1 class="title">Kok potetene perfekt!</h1>

    <div class="wrapper">
        <div class="potatogroup potatogroup1">
            <img src="img/potetklynge_1.png" alt="langtidskokte potetsorter">
            <div class="potetsorter">
                <div class="Folva">
                    <h2>Folva</h2>
                </div>
                <div class="Beate">
                    <h2>Beate</h2>
                </div>
                <div class="Astrix">
                    <h2>Astrix</h2>
                </div>

            </div>
            <div class="duration">
                <!--Block -->
                <span class="duration__time">25</span>
                <span class="duration__unit">min</span>
            </div>
            <div class="button-wrapper">
                <button class="start-btn" data-counter-duration="25">Start timing!</button>
                <button class="reset-btn">Nullstill</button>
            </div>
        </div>


        <div class="potatogroup potatogroup2">
            <img src="img/potetklynge_2.png" alt="middeltidskokte potetsorter">


            <div class="potetsorter2">
                <div class="Pimpernel">
                    <h2>Pimpernel</h2>
                </div>
                <div class="Kerrs Pink">
                    <h2>Kerrs Pink</h2>
                </div>
                <div class="Gulløye">
                    <h2>Gulløye</h2>
                </div>
            </div>
            <div class="duration">
                <!--Block -->
                <span class="duration__time">20</span>
                <span class="duration__unit">min</span>
            </div>
            <div class="button-wrapper">
                <button class="start-btn" data-counter-duration="20">Start timing!</button>
                <button class="reset-btn">Nullstill</button>
            </div>


        </div>


        <div class="potatogroup potatogroup3">
            <img src="img/mandelpotet2.png" alt="kortidskokte potetsorter">

            <div class="potetsorter3">
                <div class="Mandelpoteter">
                    <h2>Mandelpoteter</h2>

                </div>
            </div>

            <div class="duration3">
                <!--Block -->
                <span class="duration__time">7</span>
                <span class="duration__unit">min</span>
            </div>
            <div class="button-wrapper">
                <button class="start-btn" data-counter-duration="7">Start timing!</button>
                <button class="reset-btn">Nullstill</button>
            </div>

        </div>

    </div>
    <ol>
        <li>Skrubb eller skrell potetene og legg dem i kokende lettsaltet vann. Sett på timeren og klikk på start! Nedtelling tilpasset din valgte potetsort er nå i gang. Skru ned varmen når potetene er i kjelen – de skal ikke fosskoke. Til slutt sjekker du med en gaffel om poteten sklir av, da er poteten perfekt!</li>
    </ol>


    <script>
        // You can also require other files to run in this process
        require('./renderer.js')

                
        var duration = {
            "min": 0,
            "sec": 0
        };

        var timeTextObject = document.querySelector('.duration__time');
        var unitTextObject = document.querySelector('.duration__unit');
        var startButton = document.getElementsByClassName('start-btn');
        var body = document.body;

        for (var i = 0; i < startButton.length; i++) {
            startButton[i].addEventListener('click', knappetrykkFunksjon);
        }

        function knappetrykkFunksjon(event){

            //Skjule knappen etter at den er trykket på
            duration.min = this.dataset.counterDuration;
            console.log(duration.min);

            this.parentNode.classList.add('active');

            unitTextObject.classList.add('hidden');

            body.classList.add('active');

            // Start interval timer
            var intervalObj = setInterval(handleInterval, 1000);

            function handleInterval(){
                
                if(duration.min == 0 && duration.sec == 0){

                    clearInterval(intervalObj);
                    playAlarm("Perfect timing!");
                } else{
                    
                    countDown();   
                    showDuration();
                }
            }
        }

        // Nedtellingsfunksjon
        function countDown(){    
            duration.sec = duration.sec - 1;
        
            if(duration.sec < 0){
                duration.min = duration.min - 1;
                duration.sec = 59;
            }

            console.log(duration);   
        }

        function showDuration(){

            var min = duration.min;
            var sec = duration.sec;

            if(min < 10) {
                min = '0' + min;
            }
            if(sec < 10) {
                sec = '0' + sec;
            }

            timeTextObject.textContent = min +':'+ sec;
        }

        function playAlarm(text){
            timeTextObject.textContent = text;
            setTimeout(resetClock, 3000);
        }

        function resetClock(){
            
            duration.min = pomodoroMin;
            timeTextObject.textContent = duration.min;
            
            startButton.classList.remove('hidden');
            unitTextObject.classList.remove('hidden');
            body.classList.remove('active');   
        }


    </script>

</body>


</html>
